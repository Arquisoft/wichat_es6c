<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>wichat_es6c</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1><span class="image"><img src="./images/arc42-logo.png" alt="arc42"></span> wichat_es6c</h1>
<div class="details">
<span id="revnumber">version 8.2 EN,</span>
<span id="revdate">January 2023</span>
<br><span id="revremark">(based upon AsciiDoc version)</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#section-introduction-and-goals">1. Introducción y Objetivos</a>
<ul class="sectlevel2">
<li><a href="#_resumen_de_requisitos">1.1. Resumen de Requisitos</a></li>
<li><a href="#_objetivos_de_calidad">1.2. Objetivos de Calidad</a></li>
<li><a href="#_partes_interesadas">1.3. Partes Interesadas</a></li>
</ul>
</li>
<li><a href="#section-architecture-constraints">2. Restricciones arquitectonicas</a>
<ul class="sectlevel2">
<li><a href="#_restricciones_de_documentación">2.1. Restricciones de documentación</a></li>
<li><a href="#_restricciones_técnicas">2.2. Restricciones técnicas</a></li>
<li><a href="#_organizativas">2.3. Organizativas</a></li>
</ul>
</li>
<li><a href="#section-context-and-scope">3. Alcance y contexto del sistema</a>
<ul class="sectlevel2">
<li><a href="#_contexto_de_negocio">3.1. Contexto de negocio</a></li>
<li><a href="#_technical_context">3.2. Technical Context</a></li>
</ul>
</li>
<li><a href="#section-solution-strategy">4. Estrategia de solución</a>
<ul class="sectlevel2">
<li><a href="#_decisiones_tecnológicas">4.1. Decisiones tecnológicas</a></li>
<li><a href="#_descomposición_de_alto_nivel">4.2. Descomposición de alto nivel</a></li>
<li><a href="#_decisiones_para_alcanzar_objetivos_de_máxima_calidad">4.3. Decisiones para alcanzar objetivos de máxima calidad</a></li>
<li><a href="#_decisiones_de_organización_relevantes">4.4. Decisiones de organización relevantes</a></li>
</ul>
</li>
<li><a href="#section-building-block-view">5. Vista de bloques de construcción</a>
<ul class="sectlevel2">
<li><a href="#_sistema_general_de_caja_blanca">5.1. Sistema general de caja blanca</a></li>
<li><a href="#_nivel_2">5.2. Nivel 2</a></li>
</ul>
</li>
<li><a href="#_nivel_3">6. Nivel 3</a>
<ul class="sectlevel2">
<li><a href="#_black_box_question_management">6.1. Black Box: Question Management</a></li>
<li><a href="#_black_box_user_management">6.2. <strong>Black Box: User Management</strong></a></li>
</ul>
</li>
<li><a href="#section-runtime-view">7. Vista de ejecución</a>
<ul class="sectlevel2">
<li><a href="#_registro">7.1. Registro</a></li>
<li><a href="#_inicio_de_sesión">Inicio de sesión</a></li>
<li><a href="#_jugar">7.2. Jugar</a></li>
<li><a href="#_consultar_historial">7.3. Consultar historial</a></li>
<li><a href="#_interactuar_con_el_chat">7.4. Interactuar con el chat</a></li>
</ul>
</li>
<li><a href="#section-deployment-view">8. Vista de Despliegue</a>
<ul class="sectlevel2">
<li><a href="#_introducción">8.1. Introducción</a></li>
<li><a href="#_nivel_de_infraestructura_1">8.2. Nivel de Infraestructura 1</a></li>
<li><a href="#_nivel_de_infraestructura_2">8.3. Nivel de Infraestructura 2</a></li>
<li><a href="#_conclusión">8.4. Conclusión</a></li>
</ul>
</li>
<li><a href="#section-concepts">9. Conceptos tranversales</a>
<ul class="sectlevel2">
<li><a href="#_modelo_del_dominio">9.1. <em>Modelo del dominio</em></a></li>
<li><a href="#_conceptos_de_experiencia_de_usuario_ux">9.2. <em>Conceptos de experiencia de usuario (UX)</em></a></li>
<li><a href="#_conceptos_de_seguridad_y_protección">9.3. <em>Conceptos de seguridad y protección</em></a></li>
<li><a href="#_patrones_de_arquitectura_y_diseño">9.4. <em>Patrones de arquitectura y diseño</em></a></li>
<li><a href="#_conceptos_técnicos">9.5. <em>Conceptos técnicos</em></a></li>
<li><a href="#_conceptos_de_desarrollo">9.6. <em>Conceptos de desarrollo</em></a></li>
<li><a href="#_conceptos_operativos">9.7. <em>Conceptos operativos</em></a></li>
</ul>
</li>
<li><a href="#section-design-decisions">10. Decisiones arquitectónicas</a>
<ul class="sectlevel2">
<li><a href="#_decisiones">10.1. Decisiones</a></li>
</ul>
</li>
<li><a href="#section-quality-scenarios">11. Requisitos de calidad</a>
<ul class="sectlevel2">
<li><a href="#_árbol_de_calidad">11.1. Árbol de calidad</a></li>
<li><a href="#_escenarios_de_calidad">11.2. Escenarios de calidad</a></li>
</ul>
</li>
<li><a href="#section-technical-risks">12. Risks and Technical Debts</a>
<ul class="sectlevel2">
<li><a href="#_riesgos">12.1. Riesgos</a></li>
<li><a href="#_deuda_técnica">12.2. Deuda Técnica</a></li>
</ul>
</li>
<li><a href="#section-glossary">13. Glosario</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.arc42help {font-size:small; width: 14px; height: 16px; overflow: hidden; position: absolute; right: 0; padding: 2px 0 3px 2px;}
.arc42help::before {content: "?";}
.arc42help:hover {width:auto; height: auto; z-index: 100; padding: 10px;}
.arc42help:hover::before {content: "";}
@media print {
	.arc42help {display:none;}
}
</style>
<div class="paragraph">
<p><strong>About arc42</strong></p>
</div>
<div class="paragraph lead">
<p>arc42, the template for documentation of software and system architecture.</p>
</div>
<div class="paragraph">
<p>Template Version 8.2 EN. (based upon AsciiDoc version), January 2023</p>
</div>
<div class="paragraph">
<p>Created, maintained and &#169; by Dr. Peter Hruschka, Dr. Gernot Starke and contributors.
See <a href="https://arc42.org" class="bare">https://arc42.org</a>.</p>
</div>
<hr>
<div class="sidebarblock arc42help">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This version of the template contains some help and explanations.
It is used for familiarization with arc42 and the understanding of the concepts.
For documentation of your own system you use better the <em>plain</em> version.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-introduction-and-goals">1. Introducción y Objetivos</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<p>Describe los requisitos relevantes y las fuerzas impulsoras que los arquitectos de software y el equipo de desarrollo deben considerar.
Estos incluyen:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>objetivos empresariales subyacentes,</p>
</li>
<li>
<p>características esenciales,</p>
</li>
<li>
<p>requisitos funcionales esenciales,</p>
</li>
<li>
<p>objetivos de calidad para la arquitectura y</p>
</li>
<li>
<p>partes interesadas relevantes y sus expectativas.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>La aplicación WIChat permite a los usuarios participar en un concurso online de preguntas y respuestas similar a "Saber y Ganar".</p>
</div>
<div class="paragraph">
<p>El usuario ve una imagen en pantalla y puede seleccionar diferentes opciones para adivinar de qué lugar se trata.
El usuario se encontrará con una serie de modos de juego, entre los que se encuentran:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"Modo normal": el usuario tiene un tiempo limitado para adivinar la imagen y se puede pedirle ayuda a un LLM para facilitarle la tarea. Dentro de este modo además hay:</p>
</li>
<li>
<p>"Modo VS": El usuario juega haciendo que el LLM adivine lo que un texto describe. El LLM tiene un tiempo limitado para adivinar.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ambos tienen varias submodalidades, como por ejemplo:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"Países": El usuario tendrá que adivinar en base a la foto de un lugar de un país y la ia en base al nombre del país.</p>
</li>
<li>
<p>"Bandera": El usuario tendrá que adivinar por la imagen de una bandera.</p>
</li>
<li>
<p>"Famosos": El usuario tendrá que adivinar por la imagen de una persona famosa y la ia en base a un texto que describe a esa persona.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tanto las pistas como las imágenes son generadas automáticamnete a partir de Wikidata (<a href="https://www.wikidata.org/" class="bare">https://www.wikidata.org/</a>). En caso de las pistas se tratan cuidadosamente para que no contengan información que pueda dar la respuesta correcta de manera directa.</p>
</div>
<div class="sect2">
<h3 id="_resumen_de_requisitos">1.1. Resumen de Requisitos</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contenido</div>
<p>Breve descripción de los requisitos funcionales, fuerzas impulsoras y un extracto (o resumen) de los requisitos. Enlace a documentos de requisitos existentes (si los hay) con número de versión e información sobre dónde encontrarlos.</p>
</div>
<div class="paragraph">
<div class="title">Motivación</div>
<p>Desde el punto de vista de los usuarios finales, un sistema se crea o modifica para mejorar el soporte de una actividad empresarial y/o mejorar la calidad.</p>
</div>
<div class="paragraph">
<div class="title">Forma</div>
<p>Breve descripción textual, probablemente en formato tabular de casos de uso.
Si existen documentos de requisitos, este resumen debe referirse a ellos.</p>
</div>
<div class="paragraph">
<p>Mantén estos extractos lo más breves posible. Equilibra la legibilidad de este documento con la posible redundancia respecto a los documentos de requisitos.</p>
</div>
<div class="paragraph">
<div class="title">Más Información</div>
<p>Consulta <a href="https://docs.arc42.org/section-1/">Introducción y Objetivos</a> en la documentación de arc42.</p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Se deberá poder acceder desde la web tanto en ordenadores como en teléfonos.</p>
</li>
<li>
<p>El sistema mostrará imagenes, las respuestas y un sistema de pistas.</p>
</li>
<li>
<p>Los usuarios podrán registrarse en el sistema.</p>
</li>
<li>
<p>Los usuarios registrados podrán ver su historial de participaciones.</p>
</li>
<li>
<p>Los usuarios podrán ver su puntuación y la de otros usuarios.</p>
</li>
<li>
<p>Se podrá interactuar con la aplicación para obtener pistas gracias a un modelo de lenguaje.</p>
</li>
<li>
<p>Las preguntas y las pistas serán generados automáticamente a partir de los datos de Wikidata.</p>
</li>
<li>
<p>El sistema permitirá acceder a los datos de los usuarios y de las preguntas accedidas mediante unas APIs.</p>
</li>
<li>
<p>Habrá un plazo de tiempo determinado para responder a las preguntas.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_objetivos_de_calidad">1.2. Objetivos de Calidad</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contenido</div>
<p>Los tres principales (máximo cinco) objetivos de calidad para la arquitectura cuya realización es de mayor importancia para las partes interesadas principales.
Nos referimos específicamente a objetivos de calidad para la arquitectura. No los confundas con los objetivos del proyecto; no son necesariamente idénticos.</p>
</div>
<div class="paragraph">
<p>Considera esta visión general de posibles temas (basada en el estándar ISO 25010):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/01_2_iso-25010-topics-EN.drawio.png" alt="Categorías de Requisitos de Calidad">
</div>
</div>
<div class="paragraph">
<div class="title">Motivación</div>
<p>Debes conocer los objetivos de calidad de tus partes interesadas más importantes, ya que influirán en decisiones arquitectónicas fundamentales.
Sé muy concreto acerca de estas cualidades y evita términos ambiguos.
Si como arquitecto no sabes cómo se juzgará la calidad de tu trabajo&#8230;&#8203;</p>
</div>
<div class="paragraph">
<div class="title">Forma</div>
<p>Una tabla con objetivos de calidad y escenarios concretos, ordenados por prioridades.</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 7.6923%;">
<col style="width: 15.3846%;">
<col style="width: 76.9231%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Prioridad</th>
<th class="tableblock halign-left valign-top">Objetivos de calidad</th>
<th class="tableblock halign-left valign-top">Escenarios concretos</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seguridad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Los datos de los usuarios (credenciales, historial de juegos) deben estar cifrados. El sistema debe prevenir ataques comunes (SQL injection, XSS).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Los usuarios deben poder interactuar con el sistema de manera intuitiva, registrarse, jugar y obtener pistas con la menor dificultad posible. El tiempo de respuesta para mostrar una pregunta o pista no debe superar los 2 segundos.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fiabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El sistema debe garantizar una disponibilidad del 99%. Las pistas generadas por el LLM deben ser correctas en un 95% de los casos, minimizando alucinaciones y respuestas erróneas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rendimiento</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El sistema debe soportar hasta 50 usuarios concurrentes sin degradación del rendimiento. El tiempo de respuesta de la API de Wikidata y del LLM no debe superar los 5000 ms en el 95% de las solicitudes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mantenibilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El código debe estar documentado y modularizado, permitiendo que todos los implicados en el desarrollo puedan trabajar con ello lo mejor posible.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_partes_interesadas">1.3. Partes Interesadas</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contenido</div>
<p>Descripción explícita de las partes interesadas del sistema, es decir, todas las personas, roles u organizaciones que:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>deberían conocer la arquitectura,</p>
</li>
<li>
<p>deben ser convencidos de la arquitectura,</p>
</li>
<li>
<p>tienen que trabajar con la arquitectura o con el código,</p>
</li>
<li>
<p>necesitan la documentación de la arquitectura para su trabajo,</p>
</li>
<li>
<p>deben tomar decisiones sobre el sistema o su desarrollo.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Motivación</div>
<p>Debes conocer a todas las partes involucradas en el desarrollo del sistema o afectadas por él.
De lo contrario, podrías enfrentarte a sorpresas desagradables más adelante en el proceso de desarrollo.
Estas partes interesadas determinan el alcance y el nivel de detalle de tu trabajo y sus resultados.</p>
</div>
<div class="paragraph">
<div class="title">Forma</div>
<p>Tabla con nombres de roles, nombres de personas y sus expectativas con respecto a la arquitectura y su documentación.</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rol/Nombre</th>
<th class="tableblock halign-left valign-top">Contacto</th>
<th class="tableblock halign-left valign-top">Expectativas</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Profesor/Jose Emilio Labra Gayo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="http://labra.weso.es/" class="bare">http://labra.weso.es/</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Que se emplee el conocimiento lo mejor posible para tomar las decisiones arquitectónicas más adecuadas favoreciendo el aprendizaje.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Profesor/Pablo González</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="https://pglez82.github.io/" class="bare">https://pglez82.github.io/</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Que se emplee el conocimiento lo mejor posible para tomar las decisiones arquitectónicas más adecuadas favoreciendo el aprendizaje.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Profesor/Irene Cid Rico</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="https://www.linkedin.com/in/irene-cid-81158148/" class="bare">https://www.linkedin.com/in/irene-cid-81158148/</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Que se emplee el conocimiento lo mejor posible para tomar las decisiones arquitectónicas más adecuadas favoreciendo el aprendizaje.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Universidad/Uniovi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="http://uniovi.es/" class="bare">http://uniovi.es/</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Que se emplee el conocimiento lo mejor posible para tomar las decisiones arquitectónicas más adecuadas favoreciendo el aprendizaje.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cliente/RTVE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="https://www.rtve.es/" class="bare">https://www.rtve.es/</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Que las decisiones arquitectónicas sean las más adecuadas para que la aplicación funcione de la manera que esperan.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empresa/ChattySw</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="http://ChattySw.es/" class="bare">http://ChattySw.es/</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Que las decisiones arquitectónicas sean las más adecuadas para que la aplicación funcione de la manera que esperan los clientes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Empresa/Empathy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="https://empathy.ai/" class="bare">https://empathy.ai/</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interesada en que durante el desarrollo se utilice su tecnología de procesamiento de lenguaje natural de la manera más eficiente y adecuada para que tengamos un buen aprendizaje y para realizar pruebas que aporten la mayor parte .</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alumno/Jorge Puente García</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="https://github.com/JorgeePG" class="bare">https://github.com/JorgeePG</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Que las decisiones arquitectónicas sean las más adecuadas y que tengan una aplicabilidad dentro de las posibilidades de los desarrolladores.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alumno/Claudia Rodriguez Fuertes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="https://github.com/claudiaRFS" class="bare">https://github.com/claudiaRFS</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Que las decisiones arquitectónicas sean las más adecuadas y que tengan una aplicabilidad dentro de las posibilidades de los desarrolladores.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alumno/German García de la Llana</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="https://github.com/germandelallana" class="bare">https://github.com/germandelallana</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Que las decisiones arquitectónicas sean las más adecuadas y que tengan una aplicabilidad dentro de las posibilidades de los desarrolladores.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alumno/Iván García García</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em><a href="https://github.com/Ivigaga" class="bare">https://github.com/Ivigaga</a></em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Que las decisiones arquitectónicas sean las más adecuadas y que tengan una aplicabilidad dentro de las posibilidades de los desarrolladores.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-architecture-constraints">2. Restricciones arquitectonicas</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Any requirement that constraints software architects in their freedom of design and implementation decisions or decision about the development process. These constraints sometimes go beyond individual systems and are valid for whole organizations and companies.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Architects should know exactly where they are free in their design decisions and where they must adhere to constraints.
Constraints must always be dealt with; they may be negotiable, though.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Simple tables of constraints with explanations.
If needed you can subdivide them into
technical constraints, organizational and political constraints and
conventions (e.g. programming or versioning guidelines, documentation or naming conventions)</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-2/">Architecture Constraints</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_restricciones_de_documentación">2.1. Restricciones de documentación</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Restricción</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arc42</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El proyecto debe seguir la estructura de documentación de Arc42.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_restricciones_técnicas">2.2. Restricciones técnicas</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Restricción</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Acceso a datos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La información de los usuarios deberá ser accesible a través de una API para garantizar la seguridad de los datos.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs externas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación hará uso de la API de Wikidata para obtener los datos necesarios y generar imágenes y preguntas
de los lugares. Además, se integrará con la API del LLM externo Empathy AI para generar pistas sobre las imagenes de forma conversacional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Despliegue</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación debe estar desplegada y accesible en la web.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pruebas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación debera de pasar una serie de pruebas para asegurar su correcto funcionamiento.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_organizativas">2.3. Organizativas</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Restricción</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Evaluación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El proyecto será evaluado cada tres semanas, por lo que cada módulo avanzará a través de varias versiones,
 las cuales estarán alineadas con las evaluaciones parciales.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Git y GitHub</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El uso de Git como sistema de control de versiones es obligatorio.
El proyecto se alojará en un repositorio público en la plataforma GitHub, y todo el trabajo realizado, así como
las decisiones tomadas deben reflejarse en dicho repositorio.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equipo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El equipo estará formado por 4 personas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reuniones</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se realizará obligatoriamente una reunión semanal.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-context-and-scope">3. Alcance y contexto del sistema</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Context and scope - as the name suggests - delimits your system (i.e. your scope) from all its communication partners
(neighboring systems and users, i.e. the context of your system). It thereby specifies the external interfaces.</p>
</div>
<div class="paragraph">
<p>If necessary, differentiate the business context (domain specific inputs and outputs) from the technical context (channels, protocols, hardware).</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>The domain interfaces and technical interfaces to communication partners are among your system&#8217;s most critical aspects. Make sure that you completely understand them.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Various options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Context diagrams</p>
</li>
<li>
<p>Lists of communication partners and their interfaces.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-3/">Context and Scope</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_contexto_de_negocio">3.1. Contexto de negocio</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Specification of <strong>all</strong> communication partners (users, IT-systems, &#8230;&#8203;) with explanations of domain specific inputs and outputs or interfaces.
Optionally you can add domain specific formats or communication protocols.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>All stakeholders should understand which data are exchanged with the environment of the system.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>All kinds of diagrams that show the system as a black box and specify the domain interfaces to communication partners.</p>
</div>
<div class="paragraph">
<p>Alternatively (or additionally) you can use a table.
The title of the table is the name of your system, the three columns contain the name of the communication partner, the inputs, and the outputs.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>WIChat es una aplicación web de preguntas y respuestas basada en imágenes, desarrollada por ChattySw para RTVE. La aplicación permite a los usuarios registrarse, jugar y obtener premios por responder correctamente a preguntas sobre imágenes generadas automáticamente. Además, tendrá integrado un modelo de lenguaje (LLM) que proporcionará pistas para ayudar a los concursantes a responder correctamente.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./images/03_businessContext.png" alt="Diagram 3.1: Contexto de negocio"></span></p>
</div>
<div class="paragraph">
<p><strong>Usuario:</strong> Identidad que iteractúa con el sistema.</p>
</div>
<div class="paragraph">
<p><strong>WiChat:</strong> Maneja las entradas del usuario y se conecta a las APIs externas.</p>
</div>
<div class="paragraph">
<p><strong>Wikidata:</strong> Proporciona datos precisos y actualizados que se utilizan para generar las preguntas y respuestas de la aplicación.</p>
</div>
<div class="paragraph">
<p><strong>LLM:</strong> Modelo de lenguaje a gran escala que procesa las consultas de los usuarios, generando respuestas coherentes y relevantes basadas en el contexto y los datos obtenidos de Wikidata y la base de datos.</p>
</div>
<div class="paragraph">
<p><strong>Base de datos:</strong> Almacena los datos de los usuarios, estadísticas de juegos y registros de consultas.</p>
</div>
</div>
<div class="sect2">
<h3 id="_technical_context">3.2. Technical Context</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Technical interfaces (channels and transmission media) linking your system to its environment. In addition a mapping of domain specific input/output to the channels, i.e. an explanation which I/O uses which channel.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Many stakeholders make architectural decision based on the technical interfaces between the system and its context. Especially infrastructure or hardware designers decide these technical interfaces.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>E.g. UML deployment diagram describing channels to neighboring systems,
together with a mapping table showing the relationships between channels and input/output.</p>
</div>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="./images/03_technicalContext.png" alt="Diagram 3.2: Contexto Tencológico"></span></p>
</div>
<div class="paragraph">
<p><strong>Wichat App:</strong> Vista con la que interactúa el usaurio. Se conecta con Gateway Service para acceder al resto de los servicios.</p>
</div>
<div class="paragraph">
<p><strong>Gateway Service:</strong> Servicio que actúa como intermediario entre la aplicación y los servicios de backend. Se encarga de enrutar las solicitudes y respuestas entre la aplicación y los servicios.</p>
</div>
<div class="paragraph">
<p><strong>Authentication Service:</strong> Servicio que gestiona la autenticación y autorización de los usuarios. Se encarga de verificar las credenciales de los usuarios y proporcionar tokens de acceso.</p>
</div>
<div class="paragraph">
<p><strong>User Service:</strong> Servicio que gestiona la información de los usuarios y de los perfiles.</p>
</div>
<div class="paragraph">
<p><strong>History Service:</strong> Servicio que gestiona el historial de juegos y estadísticas de los usuarios. Se encarga de almacenar y recuperar la información relacionada con los juegos jugados por los usuarios.</p>
</div>
<div class="paragraph">
<p><strong>LLM Service:</strong> Servicio que se encarga de interactuar con el modelo de lenguaje a gran escala (LLM). Se encarga de enviar las consultas del usuario al LLM y recibir las respuestas generadas por el modelo.</p>
</div>
<div class="paragraph">
<p><strong>Question Service:</strong> Servicio que se encarga de gestionar las peticiones de `reguntas desde la aplicación. Hace de intermediario entre la aplicación y los servicios para guardar y generar preguntas.</p>
</div>
<div class="paragraph">
<p><strong>Question Generate Service:</strong> Servicio que se encarga de generar preguntas a partir de los datos obtenidos de Wikidata. Se encarga de enviar las consultas a la API de Wikidata y recibir las respuestas generadas por el modelo.</p>
</div>
<div class="paragraph">
<p><strong>Question Data Service:</strong> Servicio que se encarga de gestionar los datos de las preguntas generadas. Se encarga de almacenar y recuperar la información relacionada con las preguntas generadas por el modelo. Se comunica con la base de datos para almacenar y recuperar las preguntas.</p>
</div>
<div class="paragraph">
<p><strong>questiondb:</strong> Base de datos que almacena la información relacionada con las preguntas generadas por el modelo. Se encarga de almacenar y recuperar la información relacionada con las preguntas generadas por el modelo.</p>
</div>
<div class="paragraph">
<p><strong>userdb:</strong> Base de datos que almacena la información relacionada con los usuarios y sus perfiles. Se encarga de almacenar y recuperar la información relacionada con los usuarios registrados en la aplicación.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-solution-strategy">4. Estrategia de solución</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>A short summary and explanation of the fundamental decisions and solution strategies, that shape system architecture. It includes</p>
</div>
<div class="ulist">
<ul>
<li>
<p>technology decisions</p>
</li>
<li>
<p>decisions about the top-level decomposition of the system, e.g. usage of an architectural pattern or design pattern</p>
</li>
<li>
<p>decisions on how to achieve key quality goals</p>
</li>
<li>
<p>relevant organizational decisions, e.g. selecting a development process or delegating certain tasks to third parties.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>These decisions form the cornerstones for your architecture. They are the foundation for many other detailed decisions or implementation rules.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Keep the explanations of such key decisions short.</p>
</div>
<div class="paragraph">
<p>Motivate what was decided and why it was decided that way,
based upon problem statement, quality goals and key constraints.
Refer to details in the following sections.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-4/">Solution Strategy</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_decisiones_tecnológicas">4.1. Decisiones tecnológicas</h3>
<div class="paragraph">
<p>Para el desarrollo de la aplicación se decidió utilizar las siguientes tecnologías:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JavaScript será el lenguaje de programación principal.</p>
<div class="ulist">
<ul>
<li>
<p>Se ha tomado esta decisión debido a la facilidad de integración con las tecnologías seleccionadas para el desarrollo de la aplicación así hacemos que todo esté en el mismo lenguaje y favorecemos a todos los desarrolladores.</p>
</li>
</ul>
</div>
</li>
<li>
<p>React.js para construir interfaces de usuario.</p>
<div class="ulist">
<ul>
<li>
<p>Se ha seleccionado React.js por su facilidad de uso y su capacidad para crear interfaces de usuario interactivas y usables. Además, hay una comunidad muy activa y una gran cantidad de recursos disponibles para aprender y resolver problemas.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Node.js para construir el back-end.</p>
<div class="ulist">
<ul>
<li>
<p>Se ha seleccionado Node.js por su capacidad para manejar múltiples conexiones simultáneas y su facilidad de integración con otras tecnologías. Además, hay una comunidad muy activa y una gran cantidad de recursos disponibles para aprender y resolver problemas.</p>
</li>
</ul>
</div>
</li>
<li>
<p>GitHub para el control de versiones.</p>
<div class="ulist">
<ul>
<li>
<p>Se ha seleccionado GitHub por su facilidad de uso y su capacidad para gestionar proyectos de software de forma colaborativa y segura.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Docker para la contenerización de la aplicación.</p>
<div class="ulist">
<ul>
<li>
<p>Se ha seleccionado Docker por su capacidad para crear contenedores ligeros y portátiles que pueden ejecutarse en cualquier entorno y que facilitan el mantenimiento y el arreglo e problemas.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Azure para el despliegue de la aplicación.</p>
<div class="ulist">
<ul>
<li>
<p>Se ha seleccionado Azure por su capacidad para escalar la aplicación de forma automática y su facilidad de integración con otras tecnologías.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Wikidata API.</p>
<div class="ulist">
<ul>
<li>
<p>Se ha seleccionado Wikidata API para obtener información sobre las imágenes de forma programática.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Empathy API.</p>
<div class="ulist">
<ul>
<li>
<p>Modelo largo de lenguaje (LLM) para ofrecer la posibilidad de obtener pistas de las imagenes de forma conversacional.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Se han considerado otras tecnologías para el desarrollo back-end como Spting Boot, pero finalmente se decidió utilizar JavaScript por su enfoque en el desarrollo ágil junto con la facilidad de integración con Node.js y React.js ya que todo trabaja con javascript.</p>
</div>
</div>
<div class="sect2">
<h3 id="_descomposición_de_alto_nivel">4.2. Descomposición de alto nivel</h3>

</div>
<div class="sect2">
<h3 id="_decisiones_para_alcanzar_objetivos_de_máxima_calidad">4.3. Decisiones para alcanzar objetivos de máxima calidad</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Objetivo de calidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Decisión</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seguridad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se ha decidido seguir las mejores prácticas de seguridad en el desarrollo de la aplicación, como la validación de datos de entrada y la protección contra ataques de inyección de código.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se realizarán pruebas de usabilidad con usuarios reales. Serán al menos 4 tandas de 3 usuarios cada una, teniendo en cuenta que se aborden diferentes intervalos de edad y con diferente manejo de la informática.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fiabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se ha tomado la decisión de realizar pruebas de regresión y pruebas de integración para garantizar la fiabilidad de la aplicación.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rendimiento</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se realizarán pruebas de carga para garantizar el rendimiento de la aplicación para poder tener al menos 100 usuarios a la vez.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mantenibilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se utilizarán patrones de diseño y buenas prácticas de programación para garantizar la mantenibilidad de la aplicación.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eficiencia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Se optimizará el uso de recursos para garantizar que la aplicación funcione de manera eficiente donde se despliegue, además de usar los recursos externos también de manera eficiente.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Portabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación se desarrollará utilizando tecnologías y frameworks multiplataforma, asegurando que pueda desplegarse en diferentes entornos (Windows, Linux, macOS) sin generar problemas.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_decisiones_de_organización_relevantes">4.4. Decisiones de organización relevantes</h3>
<div class="paragraph">
<p>El flujo de trabajo se organizará en reuniones semanales, que se llevarán a cabo según sea necesario.
Una de las reuniones se realizará durante la clase de laboratorio y se centrará en decisiones y tareas menores. Las reuniones posteriores se realizarán de manera remota y estarán dedicadas a decisiones más detalladas y exhaustivas. En estas reuniones será necesaria la asistencia de todos los miembros del equipo para evitar problemas.</p>
</div>
<div class="paragraph">
<p>Cada tarea asignada, así como problemas encontrados, se documentará como un Issue en GitHub. Además, se utilizará GitHub Projects para la organización de las tareas del equipo.
No habrá una división estricta entre front-end y back-end, todos los miembros del equipo trabajarán en ambas áreas. Para cada tarea asignada, se creará una rama específica, y el trabajo realizado se volcará en una rama develop mediante pull requests. Una vez que se haya completado una funcionalidad y se sepa que todo va bien, se fusionará la rama develop con la rama master.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-building-block-view">5. Vista de bloques de construcción</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_sistema_general_de_caja_blanca">5.1. Sistema general de caja blanca</h3>
<div class="imageblock">
<div class="content">
<img src="./images/05_whitebox.jpg" alt="Diagram 5.1: Resumen del Sistema">
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Motivación</strong></dt>
<dd>
<p>El propósito principal del sistema es ejecutar un juego de preguntas con imágenes o texto utilizando información obtenida dinámicamente de la Wikidata API y además teniendo la posibilidad de interactuar con un LLM para solicitar su ayuda o ayudarlo a encontrar la respuesta dependiendo del modo de juego. Esto permite a los usuarios interactuar con datos reales y actualizados, mejorando la experiencia de usuario y la utilidad de la aplicación.</p>
</dd>
</dl>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Bloques de construcción contenidos</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Building Blocks</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WICHAT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parte principal de la aplicación, que controla el flujo del juego, maneja la lógica de negocio y coordina la interacción entre los servicios. Implementado en Node.js con un enfoque modular.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base de datos encargada de almacenar los datos relacionados con los usuarios y con las preguntas. Se utiliza MongoDB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wikidata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fuente de datos a la que se conecta la aplicación para obtener las imágenes, las preguntas y la información para facilitar el trabajo de la aplicación.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modelo de lenguaje con el que el usuario puede interactuar para obtener pistas sobre las preguntas del juego.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<div class="title">Interfaces importantes</div>
<ul>
<li>
<p>Frontend ↔ API Gateway: Interfaz RESTful para la comunicación entre el frontend y el backend.</p>
</li>
<li>
<p>API Gateway ↔ Backend: Interfaz interna para enrutar solicitudes a los servicios.</p>
</li>
<li>
<p>Backend ↔ Base de Datos: Interfaz para acceder y gestionar los datos almacenados.</p>
</li>
</ul>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_nivel_2">5.2. Nivel 2</h3>
<div class="imageblock">
<div class="content">
<img src="./images/05_2_whitebox2.png" alt="Diagram 5.2: Desglose Wichat">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Contained Building Blocks</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Building Blocks</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API Gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Punto de entrada unificado para todas las peticiones del frontend. Redirige solicitudes a los distintos servicios y expone métricas y documentación.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question Management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conjunto de servicios encargados de gestionar el ciclo de vida de las preguntas en la aplicación. Incluye los siguientes componentes:</p>
<p class="tableblock">- <strong>Question Generator Service</strong>
  Parte de la aplicación encargada de conectarse a Wikidata y obtener imágenes e información para las preguntas del juego.</p>
<p class="tableblock">- <strong>Question Data Service</strong>
  Parte de la aplicación encargada de tratar con la información de las preguntas conectándose a la base de datos para almacenar esta información y eliminando las preguntas que ya han salido.</p>
<p class="tableblock">- <strong>Question Service</strong>
  Parte de la aplicación encargada de gestionar el ciclo de vida de las preguntas en la aplicación. Orquesta dos componentes internos (<code>question-data-service</code> y <code>question-generator-service</code>). Es el encargado de relacionarse con el API Gateway y de recibir las peticiones de preguntas. Se encarga de la lógica de negocio relacionada con las preguntas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conjunto de servicios encargados de gestionar la información del usuario. Incluye los siguientes componentes:</p>
<p class="tableblock"> - <strong>User Service</strong>
  Parte encargada de tratar la información del usuario: puntuación, historial, etc. Se conecta a la base de datos para almacenar esta información.
 - <strong>Authentication Service</strong>
  Parte encargada de administrar la autentificación de usuarios. Se conecta a la base de datos para almacenar y comprobar los nombres y contraseñas.
 - <strong>History Service</strong>
  Parte encargada de el tratamiento de los datos de las partidas de todos los usuarios. Se conecta a la base de datos para almacenar esta información.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parte encargada de la comunicación con el modelo de lenguaje. Envía la información necesaria para obtener las pistas del jugador y devolverlas.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_black_box_api_gateway">5.2.1. Black Box: API Gateway</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Purpose/Responsibility</strong></dt>
<dd>
<p>El API Gateway actúa como un único punto de entrada para todas las peticiones desde el frontend. Es responsable de:</p>
<div class="ulist">
<ul>
<li>
<p>Redirigir solicitudes REST al servicio correspondiente (usuarios, autenticación, historial, preguntas, modelo LLM).</p>
</li>
<li>
<p>Unificar la interfaz de comunicación entre cliente y microservicios.</p>
</li>
<li>
<p>Agregar instrumentación con Prometheus para monitoreo.</p>
</li>
<li>
<p>Publicar documentación del API utilizando Swagger (OpenAPI).</p>
</li>
<li>
<p>Gestionar CORS y errores de red para los servicios backend.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Interface(s)</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>HTTP REST:</p>
</li>
<li>
<p><code>/questions/:lang/:category</code> → Question Generator Service.</p>
</li>
<li>
<p><code>/createUserHistory</code>, <code>/getUserStats</code>, <code>/getLeaderboard</code> → History Service.</p>
</li>
<li>
<p><code>/user/profile/:username</code>, <code>/user/update/profile/:username</code> → User Service.</p>
</li>
<li>
<p><code>/login</code> → Auth Service.</p>
</li>
<li>
<p><code>/askllm</code> → LLM Service.</p>
</li>
<li>
<p><code>/api-doc</code> → Exposición de documentación Swagger.</p>
</li>
<li>
<p><code>/health</code> → Endpoint para chequeo de estado.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Quality/Performance Characteristics</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Tolerancia a fallos básica mediante manejo de errores HTTP con axios.</p>
</li>
<li>
<p>Extensible: fácilmente ampliable a nuevos servicios.</p>
</li>
<li>
<p>Observabilidad: expone métricas para Prometheus.</p>
</li>
<li>
<p>Documentado: incluye Swagger/OpenAPI.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Directory/File Location</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Imagen Docker desplegada en Azure.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Fulfilled Requirements</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Centraliza la entrada de peticiones HTTP.</p>
</li>
<li>
<p>Permite escalabilidad y desacoplamiento entre frontend y servicios.</p>
</li>
<li>
<p>Facilita pruebas y exploración del sistema vía documentación automática.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Open Issues/Problems/Risks</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Usa rutas fijas, sin descubrimiento dinámico de servicios.
---</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_black_box_question_service">5.2.2. Black Box: Question Service</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsabilidad</strong></dt>
<dd>
<p>Se encarga de gestionar el ciclo de vida de las preguntas en el juego. Orquesta dos componentes internos (<code>question-data-service</code> y <code>question-generate-service</code>) para:</p>
<div class="ulist">
<ul>
<li>
<p>Verificar si hay suficientes preguntas disponibles en la base de datos.</p>
</li>
<li>
<p>Generar nuevas preguntas si es necesario.</p>
</li>
<li>
<p>Devolver una pregunta aleatoria al usuario.</p>
</li>
<li>
<p>Eliminar la pregunta una vez ha sido servida.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Interfaces expuestas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>GET /getQuestionsDb/:lang/:category</code>
Recibe solicitudes del API Gateway para obtener una pregunta aleatoria de una categoría e idioma concretos. Se asegura de que haya suficientes preguntas generadas y disponibles.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Relaciones</strong></dt>
<dt class="hdlist1">🔁 <strong>Internas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>question-data-service</code>: utilizado para obtener, contar, y eliminar preguntas desde la base de datos.</p>
</li>
<li>
<p><code>question-generate-service</code>: encargado de generar nuevas preguntas usando información de Wikidata si no hay suficientes preguntas en la base de datos.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">⚡ <strong>Externas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Gateway Service (recibe la solicitud).</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Datos</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Aunque no gestiona directamente almacenamiento, manipula datos almacenados en MongoDB a través de <code>question-data-service</code>.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Tecnología</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Node.js</p>
</li>
<li>
<p>Express.js</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Notas adicionales</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Incluye lógica de espera y reintento si no hay suficientes preguntas disponibles en la base de datos.</p>
</li>
<li>
<p>No es un microservicio autónomo en términos de almacenamiento: depende de servicios internos para la persistencia y generación.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<hr>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_nivel_3">6. Nivel 3</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_black_box_question_management">6.1. Black Box: Question Management</h3>
<div class="imageblock">
<div class="content">
<img src="./images/05_3_BlackBox_Question_Management.png" alt="Diagram 5.3.1: Desglose de Question Management">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Building Blocks</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question Generator Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parte de la aplicación encargada de conectarse a Wikidata y obtener imágenes e información para las preguntas del juego.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question Data Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parte de la aplicación encargada de tratar con la información de las preguntas conectándose a la base de datos para almacenar esta información y eliminando las preguntas que ya han salido.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Question Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parte de la aplicación encargada de gestionar el ciclo de vida de las preguntas en la aplicación. Orquesta dos componentes internos (question-data-service y question-generator-service). Es el encargado de relacionarse con gateway y de recibir las peticiones de preguntas. Se encarga de la lógica de negocio relacionada con las preguntas.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_black_box_question_generation_service">6.1.1. <strong>Black Box: Question Generation Service</strong></h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsabilidad</strong></dt>
<dd>
<p>Este servicio es responsable de generar preguntas dinámicas a partir de datos obtenidos de <strong>Wikidata</strong>. Su propósito es crear preguntas tipo quiz (imagen + opciones) relacionadas con una categoría temática como "País", "Ciudad", etc. Cada pregunta incluye una imagen, opciones posibles y una respuesta correcta. Las preguntas generadas se almacenan en una base de datos para su uso posterior.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces expuestas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Función interna: <code>generateQuestionsByCategory(category, language, numImages)</code>
Genera preguntas usando datos de Wikidata para una categoría específica.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Entrada</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>category</code> (string): Categoría de Wikidata desde donde se obtienen las imágenes (por ejemplo, "country").</p>
</li>
<li>
<p><code>language</code> (string): Idioma para los labels y preguntas.</p>
</li>
<li>
<p><code>numImages</code> (number): Número de preguntas/imágenes a generar.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Salida</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Lista de preguntas generadas. Cada pregunta tiene:</p>
</li>
<li>
<p><code>question</code> (string): Texto de la pregunta.</p>
</li>
<li>
<p><code>options</code> (array): Opciones posibles (1 correcta + 3 incorrectas).</p>
</li>
<li>
<p><code>correctAnswer</code> (string): Opción correcta.</p>
</li>
<li>
<p><code>imageUrl</code> (string): URL de la imagen.</p>
</li>
<li>
<p><code>category</code>, <code>language</code>: Metadatos.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Relaciones</strong></dt>
<dt class="hdlist1">🔁 <strong>Internas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>utils.readFromFile</code>: para leer el archivo de configuración de queries (<code>queryCategories.json</code>).</p>
</li>
<li>
<p><code>dataService.saveQuestion</code>: para almacenar las preguntas generadas en la base de datos.</p>
</li>
<li>
<p><code>Question</code> (modelo de Mongoose): modelo de pregunta en MongoDB.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Externas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Wikidata SPARQL endpoint: fuente principal de imágenes y datos semánticos para construir preguntas.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Datos</strong></dt>
<dt class="hdlist1"><strong>Entrada dinámica</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Categoría (por ejemplo, "country")</p>
</li>
<li>
<p>Idioma (por ejemplo, "es", "en")</p>
</li>
<li>
<p>Número de preguntas (ej. 5)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Ejemplo de una pregunta generada</strong></dt>
<dd>
<p><code><code>json
{
  "question": "¿A qué país pertenece esta imagen?",
  "options": ["España", "Italia", "Alemania", "Francia"],
  "correctAnswer": "España",
  "imageUrl": "https://upload.wikimedia.org/wikipedia/commons/&#8230;&#8203;",
  "category": "country",
  "language": "es"
}
</code></code></p>
</dd>
<dt class="hdlist1"><strong>Tecnología</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Node.js</p>
</li>
<li>
<p>Axios (peticiones HTTP a Wikidata)</p>
</li>
<li>
<p>MongoDB (para guardar preguntas)</p>
</li>
<li>
<p>SPARQL (consultas semánticas a Wikidata)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Notas adicionales</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Se utilizan consultas SPARQL definidas dinámicamente en un archivo JSON externo para obtener imágenes y etiquetas de Wikidata.</p>
</li>
<li>
<p>Las opciones incorrectas se generan con una segunda consulta a países en Wikidata, excluyendo la respuesta correcta.</p>
</li>
<li>
<p>La lógica asegura que cada pregunta tenga 3 distracciones viables antes de ser guardada.</p>
</li>
<li>
<p>Se implementa una mezcla aleatoria de opciones para cada pregunta.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="_black_box_question_data_service">6.1.2. <strong>Black Box: Question Data Service</strong></h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsabilidad</strong></dt>
<dd>
<p>Este servicio actúa como capa de acceso a datos para las preguntas generadas por el sistema. Se encarga de guardar, eliminar, contar y obtener preguntas desde la base de datos MongoDB usando el modelo <code>Question</code>.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces expuestas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>saveQuestion(question)</code>
Guarda una nueva pregunta en la base de datos.
<strong>Entrada:</strong> Objeto con los campos de una pregunta (<code>question</code>, <code>options</code>, <code>correctAnswer</code>, <code>imageUrl</code>, <code>category</code>, <code>language</code>).
<strong>Salida:</strong> Ninguna (lanza error si falla).</p>
</li>
<li>
<p><code>getNumberQuestionsByCategory(language, category)</code>
Devuelve el número total de preguntas en una categoría y idioma específicos.
<strong>Entrada:</strong></p>
</li>
<li>
<p><code>language</code> (string): Idioma.</p>
</li>
<li>
<p><code>category</code> (string): Categoría.
<strong>Salida:</strong> Número total de preguntas (integer).</p>
</li>
<li>
<p><code>deleteQuestionById(id)</code>
Elimina una pregunta según su ID en la base de datos.
<strong>Entrada:</strong></p>
</li>
<li>
<p><code>id</code> (string): ID de MongoDB de la pregunta.
<strong>Salida:</strong> Ninguna (lanza error si falla).</p>
</li>
<li>
<p><code>getRandomQuestionByCategory(language, categoryParam)</code>
Retorna una pregunta aleatoria de una categoría e idioma determinados.
<strong>Entrada:</strong></p>
</li>
<li>
<p><code>language</code> (string)</p>
</li>
<li>
<p><code>categoryParam</code> (string)
<strong>Salida:</strong> Objeto con los datos de la pregunta o <code>null</code> si no hay coincidencias.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Relaciones</strong></dt>
<dt class="hdlist1">🔁 <strong>Internas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Usa el modelo Mongoose <code>Question</code> para todas las operaciones con MongoDB.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">🔌 <strong>Externas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Este servicio es utilizado por el Question Generation Service y probablemente por servicios de frontend/juego para recuperar preguntas aleatorias.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Datos</strong></dt>
<dt class="hdlist1"><strong>Modelo <code>Question</code></strong></dt>
<dd>
<p><code><code>json
{
  "question": "¿A qué país pertenece esta imagen?",
  "options": ["España", "Italia", "Francia", "Alemania"],
  "correctAnswer": "España",
  "imageUrl": "https://upload.wikimedia.org/&#8230;&#8203;",
  "category": "country",
  "language": "es"
}
</code></code></p>
</dd>
<dt class="hdlist1"><strong>Colección en MongoDB</strong></dt>
<dd>
<p><code>questions</code></p>
</dd>
<dt class="hdlist1"><strong>Tecnología</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Node.js</p>
</li>
<li>
<p>MongoDB con Mongoose</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="_black_box_question_service_2">6.1.3. <strong>Black Box: Question Service</strong></h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsabilidad</strong></dt>
<dd>
<p>Este servicio se encarga de exponer un endpoint REST para obtener preguntas al usuario. Si no hay suficientes preguntas en la base de datos, coordina la generación automática mediante el <code>question-generate-service</code>.</p>
</dd>
<dt class="hdlist1"><strong>Endpoint expuesto</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>GET /getQuestionsDb/:lang/:category</code>
Devuelve una pregunta aleatoria de una categoría e idioma determinados. Si hay menos de 5 preguntas almacenadas en MongoDB, solicita la generación automática de nuevas preguntas.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Parámetros de URL</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>:lang</code> – idioma (por ejemplo, <code>es</code>, <code>en</code>)</p>
</li>
<li>
<p><code>:category</code> – categoría de pregunta (por ejemplo, <code>country</code>)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Respuesta</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>200 OK</code>: Objeto con la pregunta</p>
</li>
<li>
<p><code>404 Not Found</code>: No hay más preguntas disponibles</p>
</li>
<li>
<p><code>500 Internal Server Error</code>: Error en el proceso</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Lógica interna</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Verifica si hay al menos 5 preguntas en la base de datos.</p>
</li>
<li>
<p>Si no las hay, solicita la creación de nuevas preguntas al <code>question-generate-service</code> (hasta alcanzar 20).</p>
</li>
<li>
<p>Espera activamente (con intentos) hasta que haya al menos 4 preguntas disponibles antes de servir una.</p>
</li>
<li>
<p>Una vez entregada una pregunta, la elimina de la base de datos para evitar repeticiones.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Relaciones</strong></dt>
<dt class="hdlist1">🔁 <strong>Internas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>question-data-service</code>: Para contar, obtener y eliminar preguntas.</p>
</li>
<li>
<p><code>question-generate-service</code>: Para generar nuevas preguntas si no hay suficientes.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">🌐 <strong>Externa</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Consumido por el cliente/juego web o móvil que requiere preguntas una por una.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Datos</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Entrada: idioma (<code>lang</code>), categoría (<code>category</code>)</p>
</li>
<li>
<p>Salida: pregunta en formato:
<code><code>json
{
  "_id": "661bfc&#8230;&#8203;",
  "question": "¿A qué país pertenece esta imagen?",
  "options": ["Francia", "Italia", "España", "Alemania"],
  "correctAnswer": "España",
  "imageUrl": "https://upload.wikimedia.org/&#8230;&#8203;",
  "category": "country",
  "language": "es"
}
</code></code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Tecnología</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Node.js</p>
</li>
<li>
<p>Express.js</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_black_box_user_management">6.2. <strong>Black Box: User Management</strong></h3>
<div class="imageblock">
<div class="content">
<img src="./images/05_3_BlackBox_User_Management.png" alt="Diagram 5.3.2: Desglose de User Management">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Building Blocks</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parte encargada de tratar la información del usuario: puntuación, historial, etc. Se conecta a la base de datos para almacenar esta información.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parte encargada de administrar la autentificación de usuarios. Se conecta a la base de datos para almacenar y comprobar los nombres y contraseñas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">History Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parte encargada de el tratamiento de los datos de las partidas de todos los usuarios. Se conecta a la base de datos para almacenar esta información.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_black_box_user_service">6.2.1. <strong>Black Box: User Service</strong></h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsabilidad</strong></dt>
<dd>
<p>Este servicio gestiona el registro, consulta y actualización del perfil de los usuarios en la aplicación.</p>
</dd>
<dt class="hdlist1"><strong>Endpoints expuestos</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>POST /user</code>
Registra un nuevo usuario en la base de datos con validación de datos y encriptación de contraseña.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Body esperado</strong></dt>
<dd>
<p><code><code>json
{
  "username": "usuario123",
  "password": "Contraseña123",
  "name": "Nombre",
  "surname": "Apellido"
}
</code></code></p>
</dd>
<dt class="hdlist1"><strong>Validaciones</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>username</code> mínimo 4 caracteres</p>
</li>
<li>
<p><code>password</code> mínimo 8 caracteres, con al menos un número y una mayúscula</p>
</li>
<li>
<p><code>name</code> y <code>surname</code> no vacíos</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Respuestas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>200 OK</code>: Usuario creado exitosamente (sin la contraseña)</p>
</li>
<li>
<p><code>400 Bad Request</code>: Datos inválidos o usuario ya registrado</p>
</li>
<li>
<p><code>GET /user/profile/:username</code>
Devuelve el perfil de un usuario por su nombre de usuario (sin incluir la contraseña).</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Respuesta</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>200 OK</code>: Objeto de usuario</p>
</li>
<li>
<p><code>400 Bad Request</code>: Usuario no encontrado</p>
</li>
<li>
<p><code>PUT /user/update/profile/:username</code>
Actualiza el perfil de un usuario (nombre, apellido, imagen de perfil y descripción).</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Body esperado</strong></dt>
<dd>
<p><code><code>json
{
  "name": "NuevoNombre",
  "surname": "NuevoApellido",
  "profilePicture": "https://link.to/image.jpg",
  "description": "Nueva descripción"
}
</code></code></p>
</dd>
<dt class="hdlist1"><strong>Respuestas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>200 OK</code>: Usuario actualizado</p>
</li>
<li>
<p><code>400 Bad Request</code>: Datos inválidos o usuario no encontrado</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Lógica interna</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Al registrar un usuario, valida todos los campos y encripta la contraseña con bcrypt.</p>
</li>
<li>
<p>Permite recuperar el perfil público de un usuario sin exponer su contraseña.</p>
</li>
<li>
<p>Permite modificar ciertos datos del perfil con validaciones básicas.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Relaciones</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>🔁 <strong>Internas</strong>: utiliza el modelo <code>User</code> de Mongoose.</p>
</li>
<li>
<p>🌐 <strong>Externa</strong>: Consumido por la interfaz del cliente (registro, perfil, edición).</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Tecnología</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Node.js</p>
</li>
<li>
<p>Express.js</p>
</li>
<li>
<p>MongoDB con Mongoose</p>
</li>
<li>
<p>Bcrypt para la encriptación de contraseñas</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="_black_box_authentication_service">6.2.2. Black Box: Authentication Service</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsabilidad</strong></dt>
<dd>
<p>Este servicio se encarga de gestionar la autenticación de los usuarios. Proporciona funcionalidades como iniciar sesión, validando las credenciales del usuario y generando un <strong>token JWT</strong> para autenticar futuras solicitudes. Utiliza la base de datos para verificar las credenciales de usuario.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces expuestas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>POST /login</code>
Recibe el <code>username</code> y la <code>password</code> de un usuario, verifica que sean correctos, y si lo son, genera un <strong>token JWT</strong> para la autenticación del usuario.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Entrada</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>username</code>: Nombre de usuario.</p>
</li>
<li>
<p><code>password</code>: Contraseña del usuario.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Salida</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>token</code>: JWT que el cliente puede usar para autenticarse en futuras solicitudes.</p>
</li>
<li>
<p><code>username</code>: El nombre de usuario.</p>
</li>
<li>
<p><code>createdAt</code>: Fecha de creación de la cuenta del usuario.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Relaciones</strong></dt>
<dt class="hdlist1">🔁 <strong>Internas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>MongoDB: utilizado para almacenar los datos de usuario.</p>
</li>
<li>
<p><code>User</code> (modelo de MongoDB): modelo que define la estructura de los datos de usuario en la base de datos.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Externas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>API Gateway (gestiona las solicitudes que provienen del frontend y las dirige a este servicio).
<strong>bcrypt</strong>: para la encriptación y comparación de contraseñas.
<strong>jwt</strong>: para la generación y validación de tokens de acceso.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Datos</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Almacena los datos del usuario en una base de datos MongoDB, incluyendo:</p>
</li>
<li>
<p><code>username</code>: Nombre de usuario.</p>
</li>
<li>
<p><code>password</code>: Contraseña encriptada del usuario.</p>
</li>
<li>
<p><code>createdAt</code>: Fecha de creación de la cuenta del usuario.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Tecnología</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Node.js</p>
</li>
<li>
<p>Express.js</p>
</li>
<li>
<p>MongoDB</p>
</li>
<li>
<p>bcrypt (para encriptación de contraseñas)</p>
</li>
<li>
<p>jsonwebtoken (para la creación de tokens JWT)</p>
</li>
<li>
<p>express-validator (para validación de datos de entrada)</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Notas adicionales</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>La autenticación se basa en la comparación de contraseñas encriptadas utilizando <strong>bcrypt</strong>.</p>
</li>
<li>
<p>El servicio genera un <strong>token JWT</strong> válido por una hora, que debe ser incluido en las solicitudes subsecuentes para autenticarse en el usuario.</p>
</li>
<li>
<p>Se valida que los campos <code>username</code> y <code>password</code> sean proporcionados y cumplan con una longitud mínima antes de procesar la solicitud.</p>
</li>
<li>
<p>El token JWT es enviado como respuesta en caso de que las credenciales sean correctas.</p>
</li>
<li>
<p>Si las credenciales son incorrectas, se devuelve un error de autenticación (401).</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="_black_box_history_service">6.2.3. Black Box: History Service</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsabilidad</strong></dt>
<dd>
<p>Se encarga de gestionar y almacenar el historial de juegos de los usuarios, incluyendo su puntuación, respuestas correctas/incorrectas, tiempo jugado y modo de juego. También proporciona estadísticas detalladas y el ranking global de los jugadores.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces expuestas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>POST /createUserHistory</code>
Recibe los datos del historial del juego de un usuario y lo almacena en la base de datos.</p>
</li>
<li>
<p><code>GET /getUserHistory</code>
Devuelve el historial de juegos de un usuario específico, identificado por su <code>username</code>.</p>
</li>
<li>
<p><code>GET /getUserStats</code>
Obtiene estadísticas agregadas sobre el rendimiento de un usuario, como el total de juegos jugados, respuestas correctas, incorrectas, tiempo total y puntuación promedio.</p>
</li>
<li>
<p><code>GET /getLeaderboard</code>
Devuelve el ranking global de los jugadores, ordenado por diferentes métricas como la puntuación total, precisión, tiempo promedio, etc.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Relaciones</strong></dt>
<dt class="hdlist1">🔁 <strong>Internas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>MongoDB: utilizado para almacenar y recuperar los datos de historial de usuario.</p>
</li>
<li>
<p><code>UserHistory</code> (modelo de MongoDB): utilizado para definir y gestionar el esquema de los registros de historial de usuario.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Externas</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>API Gateway (recibe las solicitudes del usuario y las redirige a este servicio).</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Datos</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Almacena datos de historial de juego en una base de datos MongoDB, incluyendo:</p>
</li>
<li>
<p><code>username</code></p>
</li>
<li>
<p><code>correctAnswers</code></p>
</li>
<li>
<p><code>wrongAnswers</code></p>
</li>
<li>
<p><code>time</code></p>
</li>
<li>
<p><code>score</code></p>
</li>
<li>
<p><code>gameMode</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Tecnología</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Node.js</p>
</li>
<li>
<p>Express.js</p>
</li>
<li>
<p>MongoDB</p>
</li>
<li>
<p>Swagger para documentación OpenAPI</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Notas adicionales</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Utiliza <strong>agregación</strong> en MongoDB para calcular estadísticas y rankings globales.</p>
</li>
<li>
<p>El servicio soporta filtrado por diferentes criterios (e.g., por <code>username</code>, <code>sortBy</code>).</p>
</li>
<li>
<p>Implementa un sistema de rankings que tiene en cuenta varios criterios y asigna un <strong>ranking global</strong>.</p>
</li>
<li>
<p>Validaciones de entrada básicas para asegurar que los datos sean consistentes antes de almacenarlos o procesarlos.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-runtime-view">7. Vista de ejecución</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>The runtime view describes concrete behavior and interactions of the system’s building blocks in form of scenarios from the following areas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>important use cases or features: how do building blocks execute them?</p>
</li>
<li>
<p>interactions at critical external interfaces: how do building blocks cooperate with users and neighboring systems?</p>
</li>
<li>
<p>operation and administration: launch, start-up, stop</p>
</li>
<li>
<p>error and exception scenarios</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Remark: The main criterion for the choice of possible scenarios (sequences, workflows) is their <strong>architectural relevance</strong>. It is <strong>not</strong> important to describe a large number of scenarios. You should rather document a representative selection.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>You should understand how (instances of) building blocks of your system perform their job and communicate at runtime.
You will mainly capture scenarios in your documentation to communicate your architecture to stakeholders that are less willing or able to read and understand the static models (building block view, deployment view).</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>There are many notations for describing scenarios, e.g.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>numbered list of steps (in natural language)</p>
</li>
<li>
<p>activity diagrams or flow charts</p>
</li>
<li>
<p>sequence diagrams</p>
</li>
<li>
<p>BPMN or EPCs (event process chains)</p>
</li>
<li>
<p>state machines</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-6/">Runtime View</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_registro">7.1. Registro</h3>
<div class="paragraph">
<p><span class="image"><img src="./images/06_register.png" alt="Diagrama 6.1: Registro"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_inicio_de_sesión">Inicio de sesión</h3>
<div class="paragraph">
<div class="title">----</div>
<p><span class="image"><img src="./images/06_login.png" alt="Diagrama 6.2: Login"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_jugar">7.2. Jugar</h3>
<div class="paragraph">
<p><span class="image"><img src="./images/06_play.png" alt="Diagrama 6.3: Jugar"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_consultar_historial">7.3. Consultar historial</h3>
<div class="paragraph">
<p><span class="image"><img src="./images/06_history.png" alt="Diagrama 6.4 Ver historial"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_interactuar_con_el_chat">7.4. Interactuar con el chat</h3>
<div class="paragraph">
<p><span class="image"><img src="./images/06_userLlm.png" alt="Diagrama 6.5: Jugar"></span></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-deployment-view">8. Vista de Despliegue</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introducción">8.1. Introducción</h3>
<div class="paragraph">
<p>La vista de despliegue describe cómo se implementa el sistema en la infraestructura de hardware y software. Esta sección incluye un diagrama de infraestructura, una descripción de los componentes y su asignación a bloques de construcción, así como las características de calidad y rendimiento que se esperan del sistema.</p>
</div>
</div>
<div class="sect2">
<h3 id="_nivel_de_infraestructura_1">8.2. Nivel de Infraestructura 1</h3>
<div class="sect3">
<h4 id="_diagrama_de_infraestructura">8.2.1. Diagrama de Infraestructura</h4>
<div class="paragraph">
<p><span class="image"><img src="./images/03_technicalContext.png" alt="Diagram 7.1: Infraestructura"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_motivación">8.2.2. Motivación</h4>
<div class="paragraph">
<p>El sistema se desplegará en una infraestructura distribuida basada en la nube de Azure para garantizar:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Escalabilidad:</strong> Capacidad de añadir recursos según la demanda.</p>
</li>
<li>
<p><strong>Alta Disponibilidad:</strong> Uso de virtualización en la nube para minimizar tiempos de inactividad.</p>
</li>
<li>
<p><strong>Seguridad y Privacidad:</strong> Certificaciones de seguridad de Azure, cifrado y autenticación.</p>
</li>
<li>
<p><strong>Portabilidad:</strong> Uso de contenedores Docker para facilitar la ejecución en diferentes entornos.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_características_de_calidad_y_rendimiento">8.2.3. Características de Calidad y Rendimiento</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Seguridad:</strong> Implementación de cifrado TLS para comunicaciones y autenticación basada en OAuth2.</p>
</li>
<li>
<p><strong>Rendimiento:</strong> Uso de balanceadores de carga para distribuir el tráfico entre los servicios.</p>
</li>
<li>
<p><strong>Resiliencia:</strong> Configuración de redundancia en los servicios críticos para evitar puntos únicos de fallo.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_asignación_de_bloques_de_construcción_a_la_infraestructura">8.2.4. Asignación de Bloques de Construcción a la Infraestructura</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Frontend:</strong> Desplegado en un servidor web Apache accesible desde internet.</p>
</li>
<li>
<p><strong>Backend:</strong> Microservicios empaquetados en contenedores Docker (AuthService, UserService, LLM).</p>
</li>
<li>
<p><strong>Base de Datos:</strong> MongoDB desplegado en un clúster de alta disponibilidad.</p>
</li>
<li>
<p><strong>API Gateway:</strong> Desplegado en Azure API Management para gestionar y proteger las APIs.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nivel_de_infraestructura_2">8.3. Nivel de Infraestructura 2</h3>
<div class="sect3">
<h4 id="_docker_contenedores">8.3.1. Docker (Contenedores)</h4>
<div class="paragraph">
<p><span class="image"><img src="./images/DiagramaDocker_g.png" alt="Diagram 7.2: Docker"></span></p>
</div>
<div class="paragraph">
<p><strong>Explicación:</strong></p>
</div>
<div class="paragraph">
<p>Docker se utiliza para empaquetar y desplegar los microservicios. Cada contenedor incluye:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Imágenes Docker:</strong> Código, dependencias y configuración.</p>
</li>
<li>
<p><strong>Volúmenes:</strong> Persistencia de datos como logs y archivos temporales.</p>
</li>
<li>
<p><strong>Redes Docker:</strong> Comunicación entre contenedores.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mongodb_base_de_datos">8.3.2. MongoDB (Base de Datos)</h4>
<div class="paragraph">
<p><strong>Explicación:</strong></p>
</div>
<div class="paragraph">
<p>MongoDB se utiliza como base de datos principal para la aplicación. Características clave:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Alta Disponibilidad:</strong> Configuración de réplicas para garantizar la continuidad del servicio.</p>
</li>
<li>
<p><strong>Escalabilidad Horizontal:</strong> Capacidad de añadir nodos al clúster según sea necesario.</p>
</li>
<li>
<p><strong>Seguridad:</strong> Cifrado de datos en reposo y en tránsito.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_conclusión">8.4. Conclusión</h3>
<div class="paragraph">
<p>La infraestructura descrita asegura que el sistema cumpla con los requisitos de calidad, rendimiento y seguridad necesarios para operar en entornos de desarrollo, pruebas y producción. La combinación de tecnologías como Azure, Docker y MongoDB permite un despliegue eficiente y adaptable a las necesidades del negocio.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-concepts">9. Conceptos tranversales</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Content</div>
<p>This section describes overall, principal regulations and solution ideas that are relevant in multiple parts (= cross-cutting) of your system.
Such concepts are often related to multiple building blocks.
They can include many different topics, such as</p>
</div>
<div class="ulist">
<ul>
<li>
<p>models, especially domain models</p>
</li>
<li>
<p>architecture or design patterns</p>
</li>
<li>
<p>rules for using specific technology</p>
</li>
<li>
<p>principal, often technical decisions of an overarching (= cross-cutting) nature</p>
</li>
<li>
<p>implementation rules</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Concepts form the basis for <em>conceptual integrity</em> (consistency, homogeneity) of the architecture.
Thus, they are an important contribution to achieve inner qualities of your system.</p>
</div>
<div class="paragraph">
<p>Some of these concepts cannot be assigned to individual building blocks, e.g. security or safety.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>The form can be varied:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>concept papers with any kind of structure</p>
</li>
<li>
<p>cross-cutting model excerpts or scenarios using notations of the architecture views</p>
</li>
<li>
<p>sample implementations, especially for technical concepts</p>
</li>
<li>
<p>reference to typical usage of standard frameworks (e.g. using Hibernate for object/relational mapping)</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Structure</div>
<p>A potential (but not mandatory) structure for this section could be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Domain concepts</p>
</li>
<li>
<p>User Experience concepts (UX)</p>
</li>
<li>
<p>Safety and security concepts</p>
</li>
<li>
<p>Architecture and design patterns</p>
</li>
<li>
<p>"Under-the-hood"</p>
</li>
<li>
<p>development concepts</p>
</li>
<li>
<p>operational concepts</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note: it might be difficult to assign individual concepts to one specific topic
on this list.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/08-concepts-EN.drawio.png" alt="Possible topics for crosscutting concepts">
</div>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-8/">Concepts</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_modelo_del_dominio">9.1. <em>Modelo del dominio</em></h3>
<div class="paragraph">
<p><span class="image"><img src="./images/08_domainModel.png" alt="Diagram 8.1: Modelo del dominio"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_conceptos_de_experiencia_de_usuario_ux">9.2. <em>Conceptos de experiencia de usuario (UX)</em></h3>
<div class="paragraph">
<p><em>El objetivo es crear una aplicación intuitiva, accesible y atractiva, que permita a los usuarios disfrutar de la experiencia de juego de manera fluida.</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Diseño Responsivo: La aplicación se adaptará a diferentes dispositivos y tamaños de pantalla, desde pantallas grandes como las de ordenador, pasando por pantallas medias como las de tablets hasta dispositivos móviles.</em></p>
</li>
<li>
<p><em>Feedback Visual: Proporcionar retroalimentación visual inmediata para las acciones del usuario.</em></p>
</li>
<li>
<p><em>Feedback Auditivo: Proporcionar retroalimentación auditiva inmediata para las acciones del usuario favoreciendo el entendimiento de este sobre lo que está ocurriendo.</em></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_conceptos_de_seguridad_y_protección">9.3. <em>Conceptos de seguridad y protección</em></h3>
<div class="ulist">
<ul>
<li>
<p><em>Autenticación y Autorización: Se realiza una correcta autenticación de usuarios evitando que los datos de logueo sean vulnerables.</em></p>
</li>
<li>
<p><em>Protección de Datos: Se garantiza la privacidad de los usuarios encriptando las contraseñas y los datos sensibles.</em></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_patrones_de_arquitectura_y_diseño">9.4. <em>Patrones de arquitectura y diseño</em></h3>
<div class="paragraph">
<p><em>Serán utilizados dos patrones:</em></p>
</div>
<div class="paragraph">
<p><strong>API Gateway:</strong> <em>Este actúa como punto de entrada único para todas las solicitudes que realice el usuario delegandolas en sus servicios correspondientes.</em></p>
</div>
<div class="paragraph">
<p><strong>Patrón de Servicios:</strong> <em>Cada componente, como AuthService, UserService, LLM, HistoryService son servicios independientes que se enfocan en una funcionalidad específica, facilitando el mantenimiento del sistema.</em></p>
</div>
</div>
<div class="sect2">
<h3 id="_conceptos_técnicos">9.5. <em>Conceptos técnicos</em></h3>
<div class="paragraph">
<p><em>Se contemplan las siguientes tecnologías y herramientas:</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Lenguajes de Programación: JavaScript para el frontend y el backend aprovechando que se utiliza React y Node.js.</em></p>
</li>
<li>
<p><em>Frameworks: React para el frontend y Node.js para el backend.</em></p>
</li>
<li>
<p><em>Bases de Datos: MongoDB para la gestión de todos los datos de la aplicación, ya que es flexible y escalable.</em></p>
</li>
<li>
<p><em>Despliegue: Uso de Docker para la contenerización y orquestación de servicios y uso de azure para el despliegue en la nube.</em></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_conceptos_de_desarrollo">9.6. <em>Conceptos de desarrollo</em></h3>
<div class="paragraph">
<p><em>Hemos decidido empezar nuestro proyecto de cero pero basándonos en proyectos del año anterior. Esto nos permitirá tener una base más sólida para implementar la nueva funcionalidad de pistas generadas por la AI y poder incluso realizar una desarrollo mas eficiente.</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Metodología Ágil: Uso de Scrum para la gestión del proyecto.</em></p>
</li>
<li>
<p><em>Control de Versiones: Uso de Git y GitHub para el control de versiones y colaboración, favoreciendo que todos los compañeros revisen, aprendan y ayuden lo mejor posible en el desarrollo.</em></p>
</li>
<li>
<p><em>Integración Continua: Todas las pruebas han sido automatizadas, el despliegue y la monitorización también.</em></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_conceptos_operativos">9.7. <em>Conceptos operativos</em></h3>
<div class="ulist">
<ul>
<li>
<p><em>Monitorización: Es importante asegurarse de que el sistema funcione correctamente en todo momento. Para ello, se utilizarán herramientas que permitan supervisar el rendimiento del sistema, detectar errores y medir el uso de recursos. Esto nos ayudará a identificar problemas antes de que afecten a los usuarios.</em>
Estas herramientas incluiyen:</p>
<div class="ulist">
<ul>
<li>
<p>Prometheus: Herramienta de monitorización y alerta que recopila métricas de aplicaciones y sistemas.</p>
</li>
<li>
<p>Grafana: Herramienta de visualización de datos que se integra con Prometheus para crear paneles de control personalizados.</p>
</li>
<li>
<p>Artillery: Herramienta de pruebas de carga que simula múltiples usuarios para evaluar el rendimiento del sistema bajo condiciones de carga diferentes.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-design-decisions">10. Decisiones arquitectónicas</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Important, expensive, large scale or risky architecture decisions including rationales.
With "decisions" we mean selecting one alternative based on given criteria.</p>
</div>
<div class="paragraph">
<p>Please use your judgement to decide whether an architectural decision should be documented
here in this central section or whether you better document it locally
(e.g. within the white box template of one building block).</p>
</div>
<div class="paragraph">
<p>Avoid redundancy.
Refer to section 4, where you already captured the most important decisions of your architecture.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Stakeholders of your system should be able to comprehend and retrace your decisions.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Various options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ADR (<a href="https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions">Documenting Architecture Decisions</a>) for every important decision</p>
</li>
<li>
<p>List or table, ordered by importance and consequences or:</p>
</li>
<li>
<p>more detailed in form of separate sections per decision</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-9/">Architecture Decisions</a> in the arc42 documentation.
There you will find links and examples about ADR.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Para documentar las decisiones arquitectónicas se han usado las páginas de la wiki de GitHub.
A continuación se muestra una lista con las decisiones tomadas y un enlace a su documentación.</p>
</div>
<div class="sect2">
<h3 id="_decisiones">10.1. Decisiones</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6c/wiki/ADR-01-%E2%80%90-Trunk-Based-Development">ADR 01</a> - Uso de Trunk Based Development</p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6c/wiki/ADR-02-%E2%80%90-JavaScript">ADR 02</a> - Uso de JavaScript</p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6c/wiki/ADR-03--%E2%80%90-Node.js">ADR 03</a> - Uso de Node.js</p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6c/wiki/ADR-04--%E2%80%90-React">ADR 04</a> - Uso de React</p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6c/wiki/ADR-05--%E2%80%90-Empathy">ADR 05</a> - Uso de Empathy</p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6c/wiki/ADR-06--%E2%80%90-MongoDB">ADR 06</a> - Uso de MongoDB</p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6c/wiki/ADR-07--%E2%80%90-Docker">ADR 07</a> - Uso de Docker</p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6c/wiki/ADR-08--‐-Mistrailai">ADR 08</a> - Uso de Mistrailai</p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6c/wiki/ADR-09-‐-Servicios">ADR 09</a> - Arquitectura basada en servicios</p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6c/wiki/ADR-10-‐-Grafana-y-Prometheus">ADR 10</a> - Uso de Grafana y Prometheus</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-quality-scenarios">11. Requisitos de calidad</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Content</div>
<p>This section contains all quality requirements as quality tree with scenarios. The most important ones have already been described in section 1.2. (quality goals)</p>
</div>
<div class="paragraph">
<p>Here you can also capture quality requirements with lesser priority,
which will not create high risks when they are not fully achieved.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Since quality requirements will have a lot of influence on architectural
decisions you should know for every stakeholder what is really important to them,
concrete and measurable.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-10/">Quality Requirements</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_árbol_de_calidad">11.1. Árbol de calidad</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Content</div>
<p>The quality tree (as defined in ATAM – Architecture Tradeoff Analysis Method) with quality/evaluation scenarios as leafs.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>The tree structure with priorities provides an overview for a sometimes large number of quality requirements.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>The quality tree is a high-level overview of the quality goals and requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>tree-like refinement of the term "quality". Use "quality" or "usefulness" as a root</p>
</li>
<li>
<p>a mind map with quality categories as main branches</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In any case the tree should include links to the scenarios of the following section.</p>
</div>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="./images/10_qualityTree.png" alt="Diagrama 10.1: Árbol de calidad"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_escenarios_de_calidad">11.2. Escenarios de calidad</h3>
<div class="paragraph">
<p>Escenarios de uso:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Objetivo de calidad</th>
<th class="tableblock halign-left valign-top">Escenario</th>
<th class="tableblock halign-left valign-top">Sistema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un usuario inicia la aplicación por primera vez</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La interfaz guía al usuario con
un diseño intuitivo y sencillo, permitiéndole registrarse facilmente y comenzar a utilizar la aplicación sin dificultades.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seguridad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un usuario introduce sus credenciales e inicia sesión en la aplicación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Valida las credenciales y si son correctas,
 genera un token de autenticación seguro, permitiendole el acceso a la aplicación</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fiabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un usuario completa el formulario de registro</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Si algún campo está incompleto o incorrecto
  muestra un mensaje claro indicando el error y no permite proceder hasta que el usuario corrija el error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rendimiento</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Varios usuarios juegan simultaneamente en la aplicación</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mantiene los tiempos de respuesta rápidos sin que los usuarios sufran
interrupciones o esperas</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manteniabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un miembro del equipo realiza cambios en el codigo para agregar una nueva funcionalidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El código está estructurado por módulos de tal forma que pemite
agregar nuevas funcionalidades facilmente sin afectar en otras áreas de la aplicación</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Portabilidad</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un usuario inicia la aplicación en un dispositivo móvil</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación se ejecuta correctamente en el dispositivo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Eficiencia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Un usuario carga una página con múltiple contenido multimedia como imágenes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La página se carga rápidamente sin comprometer la experencia del usuario</p></td>
</tr>
</tbody>
</table>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Concretization of (sometimes vague or implicit) quality requirements using (quality) scenarios.</p>
</div>
<div class="paragraph">
<p>These scenarios describe what should happen when a stimulus arrives at the system.</p>
</div>
<div class="paragraph">
<p>For architects, two kinds of scenarios are important:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Usage scenarios (also called application scenarios or use case scenarios) describe the system’s runtime reaction to a certain stimulus. This also includes scenarios that describe the system’s efficiency or performance. Example: The system reacts to a user’s request within one second.</p>
</li>
<li>
<p>Change scenarios describe a modification of the system or of its immediate environment. Example: Additional functionality is implemented or requirements for a quality attribute change.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Scenarios make quality requirements concrete and allow to
more easily measure or decide whether they are fulfilled.</p>
</div>
<div class="paragraph">
<p>Especially when you want to assess your architecture using methods like
ATAM you need to describe your quality goals (from section 1.2)
more precisely down to a level of scenarios that can be discussed and evaluated.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Tabular or free form text.</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-technical-risks">12. Risks and Technical Debts</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>A list of identified technical risks or technical debts, ordered by priority</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>“Risk management is project management for grown-ups” (Tim Lister, Atlantic Systems Guild.)</p>
</div>
<div class="paragraph">
<p>This should be your motto for systematic detection and evaluation of risks and technical debts in the architecture, which will be needed by management stakeholders (e.g. project managers, product owners) as part of the overall risk analysis and measurement planning.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>List of risks and/or technical debts, probably including suggested measures to minimize, mitigate or avoid risks or reduce technical debts.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-11/">Risks and Technical Debt</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_riesgos">12.1. Riesgos</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Riesgo</th>
<th class="tableblock halign-left valign-top">Descripcion</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bajo conocimiento de algunas herramientas y lenguajes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Algunos miembros del grupo nunca han trabajado o no tienen mucha experiencia con algunas de las herramientas o lenguajes utilizados para el desarrollo de la aplicación. Esto puede llevar a errores o retrasos debido a su falta de conocimiento.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nunca se ha trabajado con un LLM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Esta es la primera vez que el equipo trabaja con un modelo de lenguaje o con ese en particular. Esto puede llevar a un retraso debido a la necesidad de obtener información sobre el funcioanmiento de este.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tiempos de respuesta de Wikidata y el LLM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Al ser parte integral de la aplicación la conexión con Wikidata y el modelo de lenguaje si hay algún problema en la conexión que haga que sus tiempos de respuesta sean demasiado largos esto puede repercutir en nuestra aplicación.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trabajo en equipo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Los miembros del equipo no se conocen ni han trabajado en conjunto anteriormente, se desconoce las formas de trabajo y nivel de compromiso de cada uno. Hay que tener en cuenta la posibilidad de abandono de uno de los integrantes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependencia de la API de Wikidata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación depende de la API de Wikidata para obtener información. Si la API no está disponible o cambia, esto puede afectar el funcionamiento de la aplicación.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependencia de la API del LLM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación depende de la API del modelo de lenguaje para obtener información. Si la API no está disponible o cambia, esto puede afectar el funcionamiento de la aplicación.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependencia de la red electrica</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación depende de la red electrica para su funcionamiento. Si hay un corte de luz o un problema con la red electrica, esto puede afectar el funcionamiento de la aplicación.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_deuda_técnica">12.2. Deuda Técnica</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deuda</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Descripcion</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No se cambia de LLM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación no puede cambiar de modelo de LLM en caso deque el utilizado no esté disponible. Si este fallara no se podría utilizar el chat.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Falta de paginación en el historial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación no tiene paginación en el historial de mensajes. Esto puede afectar el rendimiento de la aplicación si hay muchos mensajes en el historial y hacer incomodo para el usuario buscar partidas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mal funcionamiento del juego al acabar la partida</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación no funciona perfectamente al finalizar una partida, tarda más tiempo del esperado y proboca que los sonidos se comporten de forma extrña.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No se utiliza un modelo de mricroservisios</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación divide el código de una forma parecida a est aruitectura, pero comparten la misma base de datos y no están completamente desacoplados. Esto puede afectar el rendimiento de la aplicación y hacer que sea más difícil de escalar.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lentitud en la carga de preguntas desde Wikidata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">La aplicación tarda mucho tiempo en cargar las preguntas desde Wikidata. Esto afecta al rendimiento de la aplicación y se necesita esperar mucho tiempo si al inicar una partida no hay preguntas en la base de datos.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Malas contestaciones del LLM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">El LLM responde cosas que no tienen sentido o no son correctas. Esto puede afectar la experiencia del usuario y hacer que el juego sea menos divertido.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-glossary">13. Glosario</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>The most important domain and technical terms that your stakeholders use when discussing the system.</p>
</div>
<div class="paragraph">
<p>You can also see the glossary as source for translations if you work in multi-language teams.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>You should clearly define your terms, so that all stakeholders</p>
</div>
<div class="ulist">
<ul>
<li>
<p>have an identical understanding of these terms</p>
</li>
<li>
<p>do not use synonyms and homonyms</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>A table with columns &lt;Term&gt; and &lt;Definition&gt;.</p>
</div>
<div class="paragraph">
<p>Potentially more columns in case you need translations.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-12/">Glossary</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Término</th>
<th class="tableblock halign-left valign-top">Definición</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>ADR</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Architectural Decision Record. Documento que describe una decisión arquitectónica tomada, incluyendo el contexto, las opciones consideradas y la justificación de la elección.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>API</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Application Programming Interface. Conjunto de reglas y definiciones que permiten la comunicación entre diferentes sistemas o aplicaciones.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>LLM</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Large Language Model. Modelo de inteligencia artificial que ha sido entrenado con enormes cantidades de texto para poder entender, generar y responder en lenguaje natural.</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 8.2 EN<br>
Last updated 2025-04-29 23:47:43 +0200
</div>
</div>
</body>
</html>